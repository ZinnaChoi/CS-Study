# 운영과 보안

## 1. 온프레미스 → 클라우드 전환

### 클라우드 장점
- **확장성**: 트래픽 증가 시 자동 스케일링
- **비용 효율성**: 사용한 만큼만 과금, 초기 투자비용 절약
- **가용성**: 멀티 리전, 자동 백업/복구
- **관리 편의성**: 인프라 관리 부담 감소

### 클라우드 단점
- **보안 우려**: 데이터 외부 저장, 클라우드 업체 의존
- **네트워크 의존성**: 인터넷 연결 필수, 지연 시간
- **벤더 락인**: 특정 클라우드 업체 종속성
- **컴플라이언스**: 규제 요구사항 충족 어려움

### 전환 시 고려사항
- **데이터 마이그레이션 계획**: 다운타임 최소화 전략
- **보안 정책 재수립**: 클라우드 환경에 맞는 보안 설정
- **비용 분석**: TCO(Total Cost of Ownership) 계산
- **직원 교육**: 클라우드 기술 스택 학습

## 2. 웹 보안 공격과 방어

### XSS (Cross-Site Scripting)
**공격 방식**: 악성 스크립트를 웹페이지에 삽입하여 사용자 브라우저에서 실행
```html
<!-- 공격 예시 -->
<script>alert(document.cookie)</script>
```

**방어 방법**:
- 입력값 검증 및 이스케이프 처리
- CSP (Content Security Policy) 설정
- HttpOnly 쿠키 사용

### CSRF (Cross-Site Request Forgery)
**공격 방식**: 사용자가 의도하지 않은 요청을 강제로 전송
```html
<!-- 공격 예시 -->
<img src="http://bank.com/transfer?to=attacker&amount=1000000" alt="악성 이미지">
```

**방어 방법**:
- CSRF 토큰 사용
- SameSite 쿠키 속성 설정
- Referer 헤더 검증

### 시큐어 코딩
- **입력값 검증**: 모든 외부 입력 검증 및 필터링
- **최소 권한 원칙**: 필요한 최소한의 권한만 부여
- **오류 정보 노출 방지**: 스택 트레이스 등 민감 정보 숨김
- **암호화**: 중요 데이터 암호화 저장

### 쿠키 보안
**필요성**: 세션 관리 및 사용자 인증 정보 저장
**보안 속성**:
- `HttpOnly`: JavaScript 접근 차단
- `Secure`: HTTPS에서만 전송
- `SameSite`: CSRF 공격 방지

### CORS (Cross-Origin Resource Sharing)
**필요성**:
- 브라우저의 Same-Origin Policy 제한 해결
- 다른 도메인 간 안전한 리소스 공유
- API 서버와 프론트엔드 도메인이 다를 때 필수

```javascript
// CORS 설정 예시
app.use(cors({
  origin: 'https://trusted-domain.com',
  credentials: true
}));
```

### Drive-by Download 공격
**공격 방식**: 웹사이트 방문만으로 악성코드 자동 다운로드
**방어 방법**:
- 브라우저 보안 업데이트
- 신뢰할 수 없는 사이트 방문 금지
- 안티바이러스 프로그램 사용

## 3. 부하분산

### 온프레미스 L4 스위치
**L4 스위치 기능**:
- IP 주소와 포트 기반 부하분산
- 세션 지속성(Session Persistence) 제공
- 헬스체크를 통한 서버 상태 모니터링

**분산 알고리즘**:
- Round Robin: 순차적 분배
- Least Connection: 연결 수가 적은 서버 우선
- Weighted: 서버 성능에 따른 가중치 적용

### GSLB (Global Server Load Balancing)
**개념**: DNS 기반 글로벌 부하분산
**실제 예시**:
- LG U+ 서울 데이터센터 (응답시간 10ms)
- KT 부산 데이터센터 (응답시간 50ms)
- SK 대전 데이터센터 (응답시간 30ms)
→ 서울 사용자에게는 LG U+ 서버 IP 반환

**동작 방식**:
1. 사용자 위치 기반 최적 서버 선택
2. 서버 상태 모니터링
3. DNS 응답으로 최적 IP 반환

### CDN (Content Delivery Network)
**정의**: 전 세계 여러 지역에 분산된 서버를 통해 사용자에게 가장 가까운 서버에서 컨텐츠를 제공하는 네트워크

**CDN vs S3 차이점**:
- **CDN**: 캐싱 + 전송 최적화 (빠른 전송이 목적)
- **S3**: 데이터 저장소 (안전한 보관이 목적)

**CDN 역할**:
- 정적 컨텐츠 캐싱으로 서버 부하 감소
- 지리적으로 가까운 엣지 서버에서 컨텐츠 제공
- 원본 서버 장애 시 백업 역할

**동기화 방식**:
- **Push**: 원본 서버에서 CDN으로 컨텐츠 푸시
- **Pull**: CDN에서 필요 시 원본 서버에서 가져옴
- **Hybrid**: 중요 컨텐츠는 Push, 일반 컨텐츠는 Pull