### 암호화 기술

| 기술                            | 설명                                                                                                                                                                                       |
| ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 대칭키 암호화                   | 암호화와 복호화에 동일한 키를 사용하는 암호화 방식. 상대적으로 빠르지만, 키의 노출 위험 존재.                                                                                              |
| 비대칭키 암호화 (공개키 암호화) | 공개키와 개인키 두 가지 키를 사용하여 데이터를 암호화하고 복호화. 공개키는 누구에게나 공개되어 있으며, 데이터를 암호화할 때 사용됨. 개인키는 비밀로 유지되며, 데이터를 복호화할 때 사용됨. |
| 단방향 암호화 (해시 알고리즘)   | 복호화가 불가능한 암호화 방식으로, 주로 민감 정보를 데이터베이스에 저장할 때 사용. 해시 충돌이 발생하지 않도록 주의가 필요.                                                                |

### 웹 보안 아키텍처

#### 보안 계층 구조
```
Client ↔ [방화벽/IPS] ↔ [SSL/TLS] ↔ [WAF] ↔ Web Server ↔ WAS ↔ DB
```

#### 주요 보안 위협과 대응
| 공격 유형 | 설명 | 대응 방법 |
|-----------|------|-----------|
| **SQL 인젝션** | 사용자 입력에 SQL 구문 삽입 | WAF 차단, Prepared Statement |
| **XSS** | 입력에 JavaScript 코드 삽입 | 입력값 검증, CSP 적용 |

#### 보안 솔루션
- **WAF**: 웹 애플리케이션 계층 공격 차단
- **IPS**: 침입 차단 시스템
- **SSL/TLS**: 데이터 암호화

## 네트워크 보안 솔루션 상세

### 방화벽 vs WAF vs IPS 비교

| 구분 | 방화벽(Firewall) | WAF | IPS |
|------|------------------|-----|-----|
| **동작 계층** | L3-L4 | L7 | L5-L7 |
| **검사 대상** | IP/Port | HTTP 내용 | 패킷 내용 |
| **차단 기준** | "누가" 접근하는지 | "무엇을" 하는지 | 공격 패턴 탐지 |
| **배치 방식** | Inline | Proxy/Inline | Inline |
| **HTTPS 처리** | 암호화 상태로만 검사 | SSL 복호화 후 검사 | 암호화 상태로만 검사 |

### 보안 장치 배치 방식
- **Inline**: 트래픽 경로상 배치, 실시간 차단 가능, 지연 발생
- **Out-of-Path**: 미러링 트래픽 분석, 탐지만 가능, 지연 없음
- **IDS**: 침입 **탐지** 후 알림 (Out-of-Path)
- **IPS**: 침입 **방지** 및 실시간 차단 (Inline)

### DMZ (비무장지대)
- **정의**: 내부 네트워크와 외부 인터넷 사이의 중간 보안 영역
- **구성**: `인터넷 ↔ [외부방화벽] ↔ DMZ ↔ [내부방화벽] ↔ 내부망`
- **특징**: 외부 접근 필요한 서버(웹서버 등)를 내부망과 분리

### WAF Proxy 구조
- **DNS 기반 배치**: 도메인 조회 시 WAF IP 응답 → 실제 서버 IP 숨김
- **SSL 종료**: WAF에서 HTTPS 복호화하여 내용 검사 후 서버 전달
- **장점**: 보안 강화, 서버 부하 분산, 로그 집중화

---

### 인증 방식

| 기술                  | 설명                                                                                                                                                                                                                                    |
| --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| JWT (JSON Web Tokens) | 로그인 시 토큰 인증 방식으로 사용되며, 헤더, 페이로드, 시그니처로 구성. 서버나 세션에 인증 정보를 유지하지 않고, 클라이언트 측에서 들어오는 요청만으로 작업을 처리.                                                                     |
| 세션 인증 방식        | 사용자의 로그인 정보를 서버의 메모리나 데이터베이스에 저장하는 전통적인 인증 방식. 사용자가 로그인하면, 서버는 해당 사용자의 세션을 생성하고, 세션 ID를 클라이언트에게 전달. 클라이언트는 이후의 요청에서 세션 ID를 이용해 인증을 유지. |
| OAuth                 | 제3자 인증 방식으로, 사용자가 소셜 미디어 계정을 사용하여 다른 서비스에 로그인할 수 있게 한다. 사용자는 신뢰할 수 있는 서버에게 정보를 맡기고, 그 서버는 사용자에게 해당 정보에 접근할 수 있는 권한을 부여.                             |
| Access/Refresh 토큰   | Refresh 토큰(수명 더 길다)은 Access 토큰이 만료된 경우 다시 access 토큰을 발급받기 위해 사용. 해커의 탈취 위험 감소                                                                                                                     |

#### 세션 인증 방식

> HTTP는 비연결성, 비상태성의 특성을 갖기 때문에 서버는 클라이언트가 로그인을 했더라도, 이후 요청 때 클라이언트가 로그인을 했었는지 알 수 없음. 이에 쿠키와 세션을 사용해서 로그인
> ![alt text](img/쿠키와세션사용한로그인.png)

- 사용자가 로그인을 하면 서버는 SessionID를 쿠키에 담아 클라이언트에게 보냄. 클라이언트는 sessionID를 요청 시마다 헤더에 담아서 보내면 서버는 sessionID에 해당하는 클라이언트 정보를 세션 저장소에서 가져와 클라이언트 맞춤 응답 수행.

### JWT 토큰의 구성

| 구성 요소 | 설명                                                                                                              |
| --------- | ----------------------------------------------------------------------------------------------------------------- |
| 헤더      | 토큰의 타입(ex JWT), 암호화 알고리즘                                                                              |
| 페이로드  | 토큰의 정보, 예를 들면 사용자 ID, 유효 기간 등                                                                    |
| 시그니처  | 인코딩된 헤더와 페이로드, 그리고 비밀키를 합쳐 헤더의 알고리즘으로 암호화한 값. 이는 토큰의 무결성과 인증을 보장. |

## SSL/TLS와 HTTPS 암호화

### SSL 인증서 기본 개념
- **정의**: 웹사이트 신원 증명 + 암호화 통신용 공개키 포함된 디지털 증명서
- **구성**: 공개키 + 도메인 정보 + CA의 디지털 서명
- **역할**: ① 신원 확인 ② 데이터 안전 전송

### CA (Certificate Authority)
- **정의**: 인증서를 발급하고 관리하는 신뢰받는 제3기관
- **역할**: SSL 인증서에 디지털 서명하여 위변조 방지
- **예시**: Let's Encrypt, DigiCert, Comodo

### 대칭키 vs 비대칭키

| 구분 | 대칭키 | 비대칭키 |
|------|--------|----------|
| **키 개수** | 1개 (동일한 키) | 2개 (공개키 + 개인키) |
| **속도** | 빠름 | 느림 |
| **용도** | 실제 데이터 암호화 | 키 교환, 디지털 서명 |
| **예시** | AES | RSA, ECC |

### HTTPS 암호화 과정
1. **클라이언트**: HTTPS 연결 요청
2. **서버**: SSL 인증서 전송 (공개키 포함)
3. **클라이언트**: CA 서명 검증 + 세션키 생성
4. **클라이언트**: 공개키로 암호화한 세션키 전송
5. **이후 통신**: 세션키로 대칭 암호화 통신

### SSL 인증서 검증 과정
1. **해시 계산**: 클라이언트가 받은 SSL 인증서 내용을 해시 함수로 계산
2. **서명 복호화**: CA의 공개키로 인증서의 디지털 서명을 복호화
3. **비교 검증**: 계산한 해시값과 복호화한 해시값이 일치하는지 확인
4. **신뢰성 확인**: 일치하면 인증서가 해당 CA에서 발급되었음을 확인

**핵심**: CA의 공개키로 SSL 인증서의 디지털 서명을 복호화하여 무결성 검증

### SSL 인증서 설치 위치

| 설치 위치 | 장점 | 단점 | 사용 시나리오 |
|-----------|------|------|---------------|
| **웹서버** | 단순한 구조 | 서버 부하 증가 | 소규모 서비스 |
| **로드밸런서** | 서버 부하 분산 | 단일 장애점 | 다중 서버 환경 |
| **WAF** | 보안 검사 + SSL 처리 | 복잡한 구조 | 보안 중시 환경 |
