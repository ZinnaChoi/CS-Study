## 핵심: 암호화 기술

### 대칭키 vs 비대칭키

| 구분 | 대칭키 | 비대칭키 |
|------|--------|----------|
| **키 개수** | 1개 (동일한 키) | 2개 (공개키 + 개인키) |
| **속도** | 빠름 | 느림 |
| **용도** | 실제 데이터 암호화 | 키 교환, 디지털 서명 |
| **예시** | AES | RSA, ECC |
| **특징** | 키 공유의 어려움 | 안전한 키 교환 |

### 해시 알고리즘
- **특징**: 단방향 암호화, 복호화 불가능
- **용도**: 비밀번호 저장, 데이터 무결성 검증
- **예시**: SHA-256, MD5

## 핵심: 인증 방식

### JWT vs 세션

| 구분 | JWT | 세션 |
|------|-----|------|
| **저장 위치** | 클라이언트 | 서버 |
| **상태 관리** | Stateless | Stateful |
| **확장성** | 높음 (서버 부하 적음) | 낮음 (서버 메모리 사용) |
| **보안** | 탈취 위험 있음 | 상대적 안전 |
| **구성** | Header + Payload + Signature | SessionID만 |

### JWT 구성 요소
- **Header**: 토큰 타입, 암호화 알고리즘
- **Payload**: 사용자 정보, 유효 기간
- **Signature**: 무결성 검증용 서명

### OAuth
- **정의**: 제3자 인증 방식 (소셜 로그인)
- **장점**: 사용자 정보를 직접 관리하지 않아도 됨
- **토큰**: Access Token (짧은 수명) + Refresh Token (긴 수명)

## 핵심: HTTPS와 SSL

### HTTPS 동작 과정
1. **클라이언트**: HTTPS 연결 요청
2. **서버**: SSL 인증서 전송 (공개키 포함)
3. **클라이언트**: CA 서명 검증 + 세션키 생성
4. **클라이언트**: 공개키로 암호화한 세션키 전송
5. **이후 통신**: 세션키로 대칭 암호화 통신

**핵심 원리**: 비대칭키로 안전하게 세션키 교환 → 세션키로 빠른 대칭 암호화

### SSL 인증서와 CA
- **SSL 인증서**: 웹사이트 신원 증명 + 공개키 포함
- **CA (인증기관)**: 인증서 발급 및 디지털 서명 (Let's Encrypt, DigiCert 등)
- **검증 과정**: CA 공개키로 인증서의 디지털 서명을 복호화하여 무결성 확인

## 핵심: 웹 보안

#### 다중 계층 보안 구조
```
Client → [방화벽] → [IPS] → [WAF] → Web Server ↔ WAS ↔ DB
          ↓         ↓        ↓         ↑
      1차 필터링  2차 정밀탐지  3차 웹특화   SSL/TLS
```

### 방화벽 vs WAF

| 구분 | 방화벽 | WAF |
|------|--------|-----|
| **동작 계층** | L3-L4 (네트워크) | L7 (애플리케이션) |
| **검사 대상** | IP/Port | HTTP 내용 |
| **차단 기준** | "누가" 접근하는지 | "무엇을" 하는지 |
| **HTTPS 처리** | 암호화 상태로만 검사 | SSL 복호화 후 검사 |

### 주요 웹 공격과 대응

| 공격 유형 | 설명 | 대응 방법 |
|-----------|------|-----------|
| **SQL 인젝션** | 사용자 입력에 SQL 구문 삽입하여 DB 조작 | - Prepared Statement 사용<br>- 입력값 검증<br>- WAF 적용 |
| **XSS** | 악성 스크립트를 웹페이지에 삽입하여 브라우저에서 실행 | - 입력값 검증 및 이스케이프<br>- CSP 헤더 적용<br>- HttpOnly 쿠키 |
| **CSRF** | 사용자가 의도하지 않은 요청을 강제로 전송 | - CSRF 토큰 사용<br>- SameSite 쿠키<br>- Referer 검증 |
| **SSRF** | 서버가 내부 네트워크에 요청하도록 조작 | - 요청 URL 검증<br>- 내부 IP 차단<br>- 화이트리스트 방식 |
| **Drive-by Download** | 웹사이트 방문만으로 악성코드 자동 다운로드 | - 브라우저 보안 업데이트<br>- 신뢰할 수 없는 사이트 차단<br>- 안티바이러스 사용 |

### API 보안

| 보안 요소 | 설명 | 구현 방법 |
|-----------|------|-----------|
| **인증 (Authentication)** | 사용자가 누구인지 확인 | JWT, OAuth 2.0, API Key |
| **인가 (Authorization)** | 사용자가 해당 자원에 접근할 권한이 있는지 확인 | RBAC, ACL |
| **Rate Limiting** | API 호출 횟수 제한으로 남용 방지 | Token Bucket, Sliding Window |
| **입력 검증** | 모든 입력값에 대한 검증 | Validation Annotation, Custom Validator |

### 쿠키 보안

| 속성 | 목적 | 설명 |
|------|------|------|
| **HttpOnly** | XSS 공격 방지 | JavaScript 접근 차단 |
| **Secure** | HTTPS 전용 | HTTPS에서만 쿠키 전송 |
| **SameSite** | CSRF 공격 방지 | Cross-site 요청 시 쿠키 전송 제한 |

### CORS (Cross-Origin Resource Sharing)
- **필요성**: 브라우저의 Same-Origin Policy 제한 해결
- **용도**: 다른 도메인 간 안전한 리소스 공유
- **설정**: API 서버와 프론트엔드 도메인이 다를 때 필수

### 시큐어 코딩 원칙
- **입력값 검증**: 모든 외부 입력 검증 및 필터링
- **최소 권한 원칙**: 필요한 최소한의 권한만 부여
- **오류 정보 노출 방지**: 스택 트레이스 등 민감 정보 숨김
- **암호화**: 중요 데이터 암호화 저장

### 보안 헤더

| 헤더 | 목적 | 예시 |
|------|------|------|
| **HSTS** | HTTP를 HTTPS로 강제 리다이렉트 | `Strict-Transport-Security: max-age=31536000` |
| **CSP** | XSS 공격 방지를 위한 컨텐츠 정책 | `Content-Security-Policy: default-src 'self'` |
| **X-Frame-Options** | 클릭재킹 공격 방지 | `X-Frame-Options: DENY` |
| **X-Content-Type-Options** | MIME 타입 스니핑 방지 | `X-Content-Type-Options: nosniff` |

### 암호화 모범 사례

| 항목 | 권장사항 |
|------|----------|
| **비밀번호 저장** | bcrypt, scrypt, Argon2 사용 (절대 평문 저장 금지) |
| **API 통신** | HTTPS 강제 사용, TLS 1.2 이상 |
| **세션 관리** | 세션 타임아웃 설정, 로그인 후 세션 ID 재생성 |
| **민감 데이터** | 데이터베이스 암호화, 로그에 민감정보 기록 금지 |

## 참고: 네트워크 보안

### 보안 솔루션 비교

| 구분 | 방화벽 | IDS | IPS | WAF |
|------|-------|-----|-----|-----|
| **OSI 계층** | L3-L4 | L3-L7 | L3-L7 | L5-L7 |
| **동작 방식** | IP/Port 필터링 | 탐지만 | 탐지+차단 | 웹 공격 전문 차단 |
| **배치 방식** | Inline | Out-of-Path | Inline | Inline/Proxy |

### DMZ (비무장지대)
- **정의**: 내부망과 외부 인터넷 사이의 중간 보안 영역
- **목적**: 외부 접근이 필요한 서버를 내부망과 분리
- **구성**: `인터넷 ↔ [외부방화벽] ↔ DMZ ↔ [내부방화벽] ↔ 내부망`
